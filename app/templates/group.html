{% extends "base.html" %}

{% block content %}
  <!-- Colored Header -->
  <div class="group-header" style="background-color: #007bff; height: 250px;"></div>

  <!-- Avatar & Name -->
  <div class="d-flex justify-content-center" style="margin-top: -75px;">
    <div class="text-center">
      <img
        src="{{ group.avatar(150) }}"
        alt="{{ group.name }}'s avatar"
        class="rounded-circle border border-white"
        style="width:150px; height:150px;"
      >
      <h1 class="mt-3">{{ group.name }}</h1>
    </div>
  </div>

  <!-- Group Bio -->
  <div class="group-bio mt-4">
    <h2>About This Group</h2>
    <p>{{ group.bio or "No description available." }}</p>
  </div>

  <!-- Group Posts -->
  <style>
    .pinterest-container {
      column-count: 4;
      column-gap: 1rem;
    }
    .pin-card {
      display: inline-block;
      width: 100%;
      margin-bottom: 1rem;
      break-inside: avoid;
    }
  </style>

  <h2 class="mt-4 mb-3">Posts</h2>
  <div class="pinterest-container">
    {% if group.posts %}
      {% for post in group.posts %}
        <div class="pin-card">
          {% include '_post.html' %}
        </div>
      {% endfor %}
    {% else %}
      <p class="text-muted">No posts have been made in this group yet.</p>
    {% endif %}
  </div>

  <!-- Members List -->
  <div class="group-members mt-5">
    <h2>Members</h2>
    <div class="row">
      {% for member in members %}
        <div class="col-md-3 text-center mb-4">
          <img src="{{ member.avatar(128) }}" class="rounded-circle mb-2" alt="{{ member.username }}">
          <h5>
            <a href="{{ url_for('user', username=member.username) }}">{{ member.username }}</a>
          </h5>
        </div>
      {% else %}
        <p class="text-muted">This group has no members yet.</p>
      {% endfor %}
    </div>
  </div>

  <!-- Bottom spacer -->
  <div class="mb-5"></div>
{% endblock %}

{% block scripts %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    console.log('Group page loaded for: {{ group.name }}');
  });
</script>
{% endblock %}
