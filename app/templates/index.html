{% extends "base.html" %}

{% block content %}
  <style>
    .pinterest-container {
      column-count: 4;
      column-gap: 1rem;
    }
    .pin-card {
      display: inline-block;
      width: 100%;
      margin-bottom: 1rem;
      break-inside: avoid;
    }
  </style>

  <h2 class="mb-4">All Posts</h2>

  <div class="pinterest-container">
    {% for post in posts.items %}
      <div class="pin-card">
        {% include '_post.html' %}
      </div>
    {% else %}
      <p>No posts to display.</p>
    {% endfor %}
  </div>

  <nav aria-label="Page navigation">
    <ul class="pagination justify-content-center">
      {% if prev_url %}
        <li class="page-item"><a class="page-link" href="{{ prev_url }}">« Prev</a></li>
      {% else %}
        <li class="page-item disabled"><span class="page-link">« Prev</span></li>
      {% endif %}

      <!-- simple numeric pages -->
      {% for p in posts.iter_pages(left_edge=1, right_edge=1, left_current=2, right_current=2) %}
        {% if p %}
          <li class="page-item{% if p == posts.page %} active{% endif %}">
            <a class="page-link" href="{{ url_for('index', page=p) }}">{{ p }}</a>
          </li>
        {% else %}
          <li class="page-item disabled"><span class="page-link">…</span></li>
        {% endif %}
      {% endfor %}

      {% if next_url %}
        <li class="page-item"><a class="page-link" href="{{ next_url }}">Next »</a></li>
      {% else %}
        <li class="page-item disabled"><span class="page-link">Next »</span></li>
      {% endif %}
    </ul>
  </nav>
{% endblock %}
